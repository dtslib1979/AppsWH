<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¤ë§ˆíŠ¸í° êµ¬ë§¤ ê³µë¦¬ ê³„ì‚°ê¸°</title>
    <meta name="description" content="4ì›ì¹™ ê³µë¦¬ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•œ ìŠ¤ë§ˆíŠ¸í° êµ¬ë§¤ ì˜ì‚¬ê²°ì • ë„êµ¬">
    <meta name="theme-color" content="#6366f1">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--gray-900);
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 1rem;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 2rem;
            animation: fadeInDown 0.8s ease-out;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: 800;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .header .subtitle {
            font-size: 1.125rem;
            opacity: 0.95;
            margin-bottom: 1rem;
        }

        .version-badge {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            display: inline-block;
            font-size: 0.875rem;
            font-weight: 600;
            border: 1px solid rgba(255,255,255,0.3);
        }

        .card {
            background: white;
            border-radius: 1.5rem;
            padding: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow-xl);
            border: 1px solid var(--gray-200);
            animation: fadeInUp 0.8s ease-out;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);
        }

        .card h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--gray-800);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--gray-700);
            font-size: 0.875rem;
        }

        .input-group input, 
        .input-group select {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 2px solid var(--gray-200);
            border-radius: 0.75rem;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: var(--gray-50);
        }

        .input-group input:focus, 
        .input-group select:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 3px rgb(99 102 241 / 0.1);
            transform: translateY(-1px);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: var(--gray-50);
            border-radius: 0.75rem;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .checkbox-group:hover {
            background: white;
            border-color: var(--gray-200);
        }

        .checkbox-group input[type="checkbox"] {
            width: 1.25rem;
            height: 1.25rem;
            accent-color: var(--primary);
        }

        .checkbox-group label {
            margin: 0;
            font-weight: 500;
            color: var(--gray-700);
            cursor: pointer;
        }

        .btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 0.75rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.2);
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:active {
            transform: translateY(0);
        }

        .result-section {
            animation: fadeInUp 0.8s ease-out;
        }

        .result-card {
            background: linear-gradient(135deg, var(--gray-50) 0%, white 100%);
            border: 2px solid var(--gray-200);
            border-radius: 1.5rem;
            padding: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow-lg);
        }

        .result-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--gray-800);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .cost-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .cost-item {
            background: white;
            padding: 1.5rem;
            border-radius: 1rem;
            border: 2px solid var(--gray-200);
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .cost-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
        }

        .cost-item:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary);
        }

        .cost-item h4 {
            color: var(--gray-600);
            margin-bottom: 0.75rem;
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .cost-amount {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .cost-description {
            color: var(--gray-500);
            font-size: 0.875rem;
        }

        .recommendation {
            background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
            color: white;
            padding: 2rem;
            border-radius: 1.5rem;
            margin-top: 1.5rem;
            box-shadow: var(--shadow-xl);
            position: relative;
            overflow: hidden;
        }

        .recommendation::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 3s ease-in-out infinite;
        }

        .recommendation.warning {
            background: linear-gradient(135deg, var(--warning) 0%, #d97706 100%);
        }

        .recommendation h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .recommendation p {
            margin-bottom: 0.75rem;
            opacity: 0.95;
        }

        .recommendation p:last-child {
            margin-bottom: 0;
        }

        .principles {
            margin-top: 1.5rem;
        }

        .principle {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-left: 4px solid var(--primary);
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-radius: 0 1rem 1rem 0;
            transition: all 0.3s ease;
        }

        .principle:hover {
            transform: translateX(4px);
            box-shadow: var(--shadow-md);
        }

        .principle h4 {
            color: var(--primary-dark);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .principle p {
            color: var(--gray-600);
            margin-bottom: 0.5rem;
        }

        .principle p:last-child {
            margin-bottom: 0;
            font-weight: 500;
            color: var(--gray-700);
        }

        .breakdown {
            margin-top: 1.5rem;
        }

        .breakdown h4 {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--gray-800);
            margin-bottom: 1rem;
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--gray-200);
            transition: all 0.3s ease;
        }

        .breakdown-item:hover {
            background: var(--gray-50);
            margin: 0 -1rem;
            padding-left: 1rem;
            padding-right: 1rem;
            border-radius: 0.5rem;
        }

        .breakdown-item:last-child {
            border-bottom: 2px solid var(--primary);
            font-weight: 700;
            font-size: 1.125rem;
            color: var(--primary-dark);
        }

        .loading {
            display: inline-block;
            width: 1rem;
            height: 1rem;
            border: 2px solid var(--gray-300);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
            margin-right: 0.5rem;
        }

        /* Animations */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes shimmer {
            0%, 100% {
                transform: translateX(-100%) translateY(-100%) rotate(45deg);
            }
            50% {
                transform: translateX(100%) translateY(100%) rotate(45deg);
            }
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .card {
                padding: 1.5rem;
            }
            
            .cost-comparison {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .cost-amount {
                font-size: 1.5rem;
            }
            
            .recommendation {
                padding: 1.5rem;
            }
            
            .breakdown-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.25rem;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.75rem;
            }
            
            .card {
                padding: 1rem;
                border-radius: 1rem;
            }
            
            .input-group input,
            .input-group select {
                padding: 0.75rem;
            }
        }

        /* Focus styles for accessibility */
        .btn:focus {
            outline: 2px solid var(--primary);
            outline-offset: 2px;
        }

        /* Reduced motion for accessibility */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“± ìŠ¤ë§ˆíŠ¸í° êµ¬ë§¤ ê³µë¦¬ ê³„ì‚°ê¸°</h1>
            <p class="subtitle">4ì›ì¹™ ê³µë¦¬ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•œ ìµœì  êµ¬ë§¤ ì˜ì‚¬ê²°ì •</p>
            <span class="version-badge">v2.1 PWA</span>
        </div>

        <div class="card">
            <h2>ğŸ“Š ê³„ì‚° ì¡°ê±´ ì…ë ¥</h2>
            
            <div class="input-group">
                <label for="currentPlan">í˜„ì¬ ì›” ìš”ê¸ˆì œ (ì›)</label>
                <input type="number" id="currentPlan" value="10400" placeholder="ì˜ˆ: 10400">
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="welfareDiscount">
                <label for="welfareDiscount">ë³µì§€í• ì¸ ì ìš© (ì›” 28,000ì›)</label>
            </div>

            <div class="input-group">
                <label for="deviceModel">í¬ë§ ê¸°ì¢…</label>
                <select id="deviceModel">
                    <option value="basic">Galaxy S25 ê¸°ë³¸í˜• (ì•½ 115ë§Œì›)</option>
                    <option value="plus">Galaxy S25 Plus (ì•½ 135ë§Œì›)</option>
                    <option value="ultra">Galaxy S25 Ultra (ì•½ 170ë§Œì›)</option>
                </select>
            </div>

            <div class="input-group">
                <label for="carrierPlan1">í†µì‹ ì‚¬ 6ê°œì›” ìš”ê¸ˆì œ (ì›)</label>
                <input type="number" id="carrierPlan1" value="86400" placeholder="ì˜ˆ: 86400">
            </div>

            <div class="input-group">
                <label for="carrierPlan2">í†µì‹ ì‚¬ 18ê°œì›” ìš”ê¸ˆì œ (ì›)</label>
                <input type="number" id="carrierPlan2" value="18400" placeholder="ì˜ˆ: 18400">
            </div>

            <div class="input-group">
                <label for="subsidyAmount">ê³µì‹œì§€ì›ê¸ˆ + ì¶”ê°€ì§€ì›ê¸ˆ (ì›)</label>
                <input type="number" id="subsidyAmount" value="550000" placeholder="ì˜ˆ: 550000">
            </div>

            <div class="input-group">
                <label for="retailPrice">ìê¸‰ì œ ê°€ê²© (ì›)</label>
                <input type="number" id="retailPrice" value="1480000" placeholder="ì˜ˆ: 1480000">
            </div>

            <div class="input-group">
                <label for="mvnoPrice">ì•Œëœ°í° ì›” ìš”ê¸ˆ (ì›)</label>
                <input type="number" id="mvnoPrice" value="17000" placeholder="ì˜ˆ: 17000">
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="hasTablet">
                <label for="hasTablet">íƒœë¸”ë¦¿ ë³´ìœ  (Síœ ì—°ë™ì„± ê³ ë ¤)</label>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="appleTransition">
                <label for="appleTransition">2028ë…„ ì• í”Œ ìƒíƒœê³„ ì „í™˜ ê³„íš</label>
            </div>

            <button class="btn" onclick="calculateOptimalChoice()">
                <span id="btnText">ìµœì  ì„ íƒ ê³„ì‚°í•˜ê¸°</span>
            </button>
        </div>

        <div class="result-section" id="resultSection" style="display: none;">
            <div class="result-card">
                <h3 class="result-title">ğŸ’° 24ê°œì›” ì´ë¹„ìš© ë¹„êµ</h3>
                
                <div class="cost-comparison">
                    <div class="cost-item">
                        <h4>ğŸ“ í†µì‹ ì‚¬ í”„ë¡œëª¨ì…˜</h4>
                        <div class="cost-amount" id="carrierTotal">-</div>
                        <p class="cost-description">ì¸í¬ë ˆë©˜íƒˆ ë¹„ìš©</p>
                    </div>
                    <div class="cost-item">
                        <h4>ğŸ“± ìê¸‰ì œ + ì•Œëœ°í°</h4>
                        <div class="cost-amount" id="retailTotal">-</div>
                        <p class="cost-description">ì´ ë¹„ìš©</p>
                    </div>
                </div>

                <div class="breakdown" id="breakdown">
                    <!-- ë¹„ìš© ì„¸ë¶€ë¶„ì„ -->
                </div>
            </div>

            <div class="result-card">
                <h3 class="result-title">ğŸ¯ 4ì›ì¹™ ê³µë¦¬ ë¶„ì„</h3>
                <div class="principles" id="principlesAnalysis">
                    <!-- ê³µë¦¬ ë¶„ì„ ê²°ê³¼ -->
                </div>
            </div>

            <div class="recommendation" id="recommendation">
                <!-- ì¶”ì²œ ê²°ê³¼ -->
            </div>
        </div>
    </div>

    <script>
        // ì„¤ì • ë°ì´í„°
        const CONFIG = {
            version: "2.1.0",
            welfareDiscount: 28000,
            devices: {
                basic: { price: 1150000, name: "Galaxy S25 ê¸°ë³¸í˜•" },
                plus: { price: 1350000, name: "Galaxy S25 Plus" },
                ultra: { price: 1700000, name: "Galaxy S25 Ultra" }
            },
            principles: {
                1: {
                    title: "ê³µë¦¬ 1: ê¸°ë³¸ ì›ì¹™ (ìê¸‰ì œ + ì•Œëœ°í°)",
                    description: "WiFi ì¤‘ì‹¬ ìƒí™œ, ë³µì§€í• ì¸ ì—†ëŠ” ì¼ë°˜ ì‚¬ìš©ìëŠ” ìê¸‰ì œ + ì•Œëœ°í°ì´ ìµœì "
                },
                2: {
                    title: "ê³µë¦¬ 2: ì˜ˆì™¸ ì›ì¹™ (í†µì‹ ì‚¬ í”„ë¡œëª¨ì…˜)",
                    description: "ê¸°ì´ˆìˆ˜ê¸‰ì, ì°¨ìƒìœ„ê³„ì¸µ ë“± ë³µì§€í• ì¸ ëŒ€ìƒìëŠ” í†µì‹ ì‚¬ í”„ë¡œëª¨ì…˜ í™œìš©"
                },
                3: {
                    title: "ê³µë¦¬ 3: ìˆ˜ë¦¬ë¹„ ë³€ìˆ˜ ê´€ë¦¬",
                    description: "ë°” íƒ€ì… ì„ íƒìœ¼ë¡œ ìˆ˜ë¦¬ë¹„ ë¦¬ìŠ¤í¬ ìµœì†Œí™”, ë³´í—˜ ìƒê³„ì²˜ë¦¬"
                },
                4: {
                    title: "ê³µë¦¬ 4: ì‘ì—… í˜¸í™˜ì„± & ìƒíƒœê³„ ì „í™˜",
                    description: "íƒœë¸”ë¦¿ ì—°ë™ì„±, 2028ë…„ ì• í”Œ ì „í™˜ íƒ€ì´ë° ê³ ë ¤"
                }
            }
        };

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì €ì¥/ë³µì›
        function saveInputs() {
            try {
                const inputs = {
                    currentPlan: document.getElementById('currentPlan')?.value || '10400',
                    welfareDiscount: document.getElementById('welfareDiscount')?.checked || false,
                    deviceModel: document.getElementById('deviceModel')?.value || 'basic',
                    carrierPlan1: document.getElementById('carrierPlan1')?.value || '86400',
                    carrierPlan2: document.getElementById('carrierPlan2')?.value || '18400',
                    subsidyAmount: document.getElementById('subsidyAmount')?.value || '550000',
                    retailPrice: document.getElementById('retailPrice')?.value || '1480000',
                    mvnoPrice: document.getElementById('mvnoPrice')?.value || '17000',
                    hasTablet: document.getElementById('hasTablet')?.checked || false,
                    appleTransition: document.getElementById('appleTransition')?.checked || false
                };
                localStorage.setItem('smartphoneCalculatorInputs', JSON.stringify(inputs));
            } catch (error) {
                console.warn('ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:', error);
            }
        }

        function loadInputs() {
            try {
                const saved = localStorage.getItem('smartphoneCalculatorInputs');
                if (saved) {
                    const inputs = JSON.parse(saved);
                    Object.keys(inputs).forEach(key => {
                        const element = document.getElementById(key);
                        if (element) {
                            if (element.type === 'checkbox') {
                                element.checked = Boolean(inputs[key]);
                            } else {
                                element.value = inputs[key] || '';
                            }
                        }
                    });
                }
            } catch (error) {
                console.warn('ë¶ˆëŸ¬ì˜¤ê¸°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤:', error);
            }
        }

        // ì•ˆì „í•œ ìˆ«ì íŒŒì‹± í•¨ìˆ˜
        function safeParseInt(value, defaultValue = 0) {
            const parsed = parseInt(value);
            return isNaN(parsed) ? defaultValue : parsed;
        }

        // ê³„ì‚° í•¨ìˆ˜
        function calculateOptimalChoice() {
            try {
                // ë¡œë”© ìƒíƒœ í‘œì‹œ
                const btnText = document.getElementById('btnText');
                const originalText = btnText.textContent;
                btnText.innerHTML = '<span class="loading"></span>ê³„ì‚° ì¤‘...';
                
                setTimeout(() => {
                    performCalculation();
                    btnText.textContent = originalText;
                }, 500);
                
            } catch (error) {
                console.error('ê³„ì‚° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤:', error);
                alert('ê³„ì‚° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì…ë ¥ê°’ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
                document.getElementById('btnText').textContent = 'ìµœì  ì„ íƒ ê³„ì‚°í•˜ê¸°';
            }
        }

        function performCalculation() {
            saveInputs();

            // ì•ˆì „í•œ ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸°
            const currentPlan = safeParseInt(document.getElementById('currentPlan')?.value, 10400);
            const welfareDiscount = document.getElementById('welfareDiscount')?.checked || false;
            const deviceModel = document.getElementById('deviceModel')?.value || 'basic';
            const carrierPlan1 = safeParseInt(document.getElementById('carrierPlan1')?.value, 86400);
            const carrierPlan2 = safeParseInt(document.getElementById('carrierPlan2')?.value, 18400);
            const subsidyAmount = safeParseInt(document.getElementById('subsidyAmount')?.value, 550000);
            const retailPrice = safeParseInt(document.getElementById('retailPrice')?.value, 1480000);
            const mvnoPrice = safeParseInt(document.getElementById('mvnoPrice')?.value, 17000);
            const hasTablet = document.getElementById('hasTablet')?.checked || false;
            const appleTransition = document.getElementById('appleTransition')?.checked || false;

            // ë² ì´ìŠ¤ë¼ì¸ ê³„ì‚°
            const baseline = currentPlan * 24;

            // ë³µì§€í• ì¸ ë°˜ì˜
            const monthlyWelfareDiscount = welfareDiscount ? CONFIG.welfareDiscount : 0;
            const totalWelfareDiscount = monthlyWelfareDiscount * 24;

            // í†µì‹ ì‚¬ í”„ë¡œëª¨ì…˜ ì´ë¹„ìš©
            const carrier6months = Math.max(0, (carrierPlan1 - monthlyWelfareDiscount)) * 6;
            const carrier18months = Math.max(0, (carrierPlan2 - monthlyWelfareDiscount)) * 18;
            const carrierDeviceCost = Math.max(0, CONFIG.devices[deviceModel].price - subsidyAmount);
            const carrierTotal = carrier6months + carrier18months + carrierDeviceCost;

            // ì¸í¬ë ˆë©˜íƒˆ ë¹„ìš©
            const incremental = carrierTotal - baseline;

            // ìê¸‰ì œ + ì•Œëœ°í° ì´ë¹„ìš©
            const retailTotal = retailPrice + (mvnoPrice * 24);

            // ë¹„ìš© ì°¨ì´
            const difference = retailTotal - carrierTotal;

            // 4ì›ì¹™ ë¶„ì„
            const principlesAnalysis = analyzePrinciples({
                welfareDiscount,
                hasTablet,
                appleTransition,
                deviceModel,
                incremental,
                difference
            });

            // ê²°ê³¼ í‘œì‹œ
            displayResults({
                carrierTotal,
                incremental,
                retailTotal,
                difference,
                baseline,
                carrier6months,
                carrier18months,
                carrierDeviceCost,
                totalWelfareDiscount,
                principlesAnalysis,
                deviceModel
            });

            // ê²°ê³¼ ì„¹ì…˜ í‘œì‹œ
            const resultSection = document.getElementById('resultSection');
            if (resultSection) {
                resultSection.style.display = 'block';
                resultSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function analyzePrinciples({ welfareDiscount, hasTablet, appleTransition, deviceModel, incremental, difference }) {
            const analysis = [];

            // ê³µë¦¬ 1 or 2 ì ìš©
            if (welfareDiscount) {
                analysis.push({
                    principle: 2,
                    active: true,
                    reason: "ë³µì§€í• ì¸ì´ ì ìš©ë˜ì–´ í†µì‹ ì‚¬ í”„ë¡œëª¨ì…˜ì´ ìœ ë¦¬í•©ë‹ˆë‹¤."
                });
            } else {
                analysis.push({
                    principle: 1,
                    active: difference > 0,
                    reason: difference > 0 ? "ë³µì§€í• ì¸ì´ ì—†ì–´ ìê¸‰ì œ + ì•Œëœ°í°ì´ ìœ ë¦¬í•©ë‹ˆë‹¤." : "í˜„ì¬ ì¡°ê±´ì—ì„œëŠ” í†µì‹ ì‚¬ í”„ë¡œëª¨ì…˜ì´ ë” ìœ ë¦¬í•©ë‹ˆë‹¤."
                });
            }

            // ê³µë¦¬ 3
            analysis.push({
                principle: 3,
                active: true,
                reason: "ë°” íƒ€ì… ëª¨ë¸ë¡œ ìˆ˜ë¦¬ë¹„ ë¦¬ìŠ¤í¬ê°€ í´ë“œ ëŒ€ë¹„ ë‚®ìŠµë‹ˆë‹¤."
            });

            // ê³µë¦¬ 4
            let principle4Reason = "";
            if (hasTablet && deviceModel === 'ultra') {
                principle4Reason = "íƒœë¸”ë¦¿ê³¼ Síœ ì—°ë™ì„±ìœ¼ë¡œ ì‘ì—… ì—°ì†ì„± í™•ë³´ë©ë‹ˆë‹¤.";
            } else if (hasTablet && deviceModel !== 'ultra') {
                principle4Reason = "íƒœë¸”ë¦¿ì´ ìˆì–´ë„ Síœ ì—†ëŠ” ëª¨ë¸ë¡œ ì—°ë™ì„±ì´ ì œí•œë©ë‹ˆë‹¤.";
            }
            
            if (appleTransition) {
                principle4Reason += (principle4Reason ? " " : "") + "2028ë…„ ì• í”Œ ì „í™˜ ê³„íšìœ¼ë¡œ ë§ˆì§€ë§‰ ì‚¼ì„± ì„¸ëŒ€ íˆ¬ìì…ë‹ˆë‹¤.";
            }

            analysis.push({
                principle: 4,
                active: hasTablet || appleTransition,
                reason: principle4Reason || "ì‘ì—… í˜¸í™˜ì„±ê³¼ ì „í™˜ ê³„íšì„ ê³ ë ¤í•˜ì„¸ìš”."
            });

            return analysis;
        }

        function displayResults(data) {
            try {
                // ì´ë¹„ìš© í‘œì‹œ
                const carrierTotalEl = document.getElementById('carrierTotal');
                const retailTotalEl = document.getElementById('retailTotal');
                
                if (carrierTotalEl) carrierTotalEl.textContent = formatCurrency(data.incremental);
                if (retailTotalEl) retailTotalEl.textContent = formatCurrency(data.retailTotal);

                // ë¹„ìš© ì„¸ë¶€ë¶„ì„
                const breakdown = document.getElementById('breakdown');
                if (breakdown) {
                    breakdown.innerHTML = `
                        <h4>ğŸ“Š í†µì‹ ì‚¬ í”„ë¡œëª¨ì…˜ ì„¸ë¶€ë¹„ìš©</h4>
                        <div class="breakdown-item">
                            <span>ë² ì´ìŠ¤ë¼ì¸ (í˜„ì¬ ìš”ê¸ˆ Ã— 24ê°œì›”)</span>
                            <span>${formatCurrency(data.baseline)}</span>
                        </div>
                        <div class="breakdown-item">
                            <span>6ê°œì›” ê³ ê°€ìš”ê¸ˆì œ ì¦ì•¡ë¶„</span>
                            <span>${formatCurrency(data.carrier6months)}</span>
                        </div>
                        <div class="breakdown-item">
                            <span>18ê°œì›” ì¼ë°˜ìš”ê¸ˆì œ ì¦ì•¡ë¶„</span>
                            <span>${formatCurrency(data.carrier18months)}</span>
                        </div>
                        <div class="breakdown-item">
                            <span>ë‹¨ë§ê¸° í• ë¶€ê¸ˆ (ì¶œê³ ê°€ - ì§€ì›ê¸ˆ)</span>
                            <span>${formatCurrency(data.carrierDeviceCost)}</span>
                        </div>
                        ${data.totalWelfareDiscount > 0 ? `
                        <div class="breakdown-item">
                            <span>ë³µì§€í• ì¸ (-)</span>
                            <span>-${formatCurrency(data.totalWelfareDiscount)}</span>
                        </div>` : ''}
                        <div class="breakdown-item">
                            <span><strong>ì¸í¬ë ˆë©˜íƒˆ ì´ë¹„ìš©</strong></span>
                            <span><strong>${formatCurrency(data.incremental)}</strong></span>
                        </div>
                    `;
                }

                // 4ì›ì¹™ ë¶„ì„ í‘œì‹œ
                const principlesAnalysis = document.getElementById('principlesAnalysis');
                if (principlesAnalysis) {
                    principlesAnalysis.innerHTML = data.principlesAnalysis.map(item => `
                        <div class="principle">
                            <h4>${CONFIG.principles[item.principle].title}</h4>
                            <p>${CONFIG.principles[item.principle].description}</p>
                            <p><strong>ì ìš© ê²°ê³¼:</strong> ${item.reason}</p>
                        </div>
                    `).join('');
                }

                // ì¶”ì²œ ê²°ê³¼
                const recommendation = document.getElementById('recommendation');
                if (recommendation) {
                    if (data.difference > 0) {
                        recommendation.className = 'recommendation';
                        recommendation.innerHTML = `
                            <h3>ğŸ¯ ì¶”ì²œ: í†µì‹ ì‚¬ í”„ë¡œëª¨ì…˜</h3>
                            <p><strong>ì ˆì•½ íš¨ê³¼:</strong> ìê¸‰ì œ ëŒ€ë¹„ ${formatCurrency(data.difference)} ì ˆì•½</p>
                            <p><strong>ê·¼ê±°:</strong> ${data.principlesAnalysis.filter(p => p.active).map(p => CONFIG.principles[p.principle].title.split(': ')[1]).join(', ')}</p>
                            <p>ì¸í¬ë ˆë©˜íƒˆ íˆ¬ìë¹„ìš© ${formatCurrency(data.incremental)}ìœ¼ë¡œ ${CONFIG.devices[data.deviceModel].name} í™•ë³´</p>
                        `;
                    } else {
                        recommendation.className = 'recommendation warning';
                        recommendation.innerHTML = `
                            <h3>âš ï¸ ì¶”ì²œ: ìê¸‰ì œ + ì•Œëœ°í°</h3>
                            <p><strong>ì ˆì•½ íš¨ê³¼:</strong> í†µì‹ ì‚¬ ëŒ€ë¹„ ${formatCurrency(Math.abs(data.difference))} ì ˆì•½</p>
                            <p><strong>ê·¼ê±°:</strong> ê³µë¦¬ 1 (ê¸°ë³¸ ì›ì¹™) ì ìš©</p>
                            <p>ë³µì§€í• ì¸ì´ ì—†ì–´ ìê¸‰ì œ êµ¬ë§¤ê°€ ë” ê²½ì œì ì…ë‹ˆë‹¤.</p>
                        `;
                    }
                }
            } catch (error) {
                console.error('ê²°ê³¼ í‘œì‹œ ì¤‘ ì˜¤ë¥˜:', error);
            }
        }

        function formatCurrency(amount) {
            try {
                return new Intl.NumberFormat('ko-KR', {
                    style: 'currency',
                    currency: 'KRW',
                    minimumFractionDigits: 0
                }).format(amount);
            } catch (error) {
                return `${amount.toLocaleString()}ì›`;
            }
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
        document.addEventListener('DOMContentLoaded', () => {
            loadInputs();
            
            // ì…ë ¥ê°’ ë³€ê²½ ì‹œ ìë™ ì €ì¥
            const inputs = document.querySelectorAll('input, select');
            inputs.forEach(input => {
                input.addEventListener('input', saveInputs);
                input.addEventListener('change', saveInputs);
            });
        });

        // ì—ëŸ¬ ì²˜ë¦¬
        window.addEventListener('error', (event) => {
            console.error('ì „ì—­ ì—ëŸ¬:', event.error);
        });

        window.addEventListener('unhandledrejection', (event) => {
            console.error('ì²˜ë¦¬ë˜ì§€ ì•Šì€ Promise ê±°ë¶€:', event.reason);
        });
    </script>
</body>
</html>